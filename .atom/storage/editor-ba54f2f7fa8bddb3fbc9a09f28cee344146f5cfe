{"mode":"editor","version":1,"windowDimensions":{"x":295,"y":111,"width":1024,"height":1024},"syntax":{"deserializer":"Syntax","grammarOverridesByPath":{}},"project":{"path":"/Users/kwatanabe/git/whiteplus/hiroie/hiroie_api_develop/docs/db","buffers":[{"text":"SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;\nSET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;\nSET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';\n\nCREATE SCHEMA IF NOT EXISTS `hiroie` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ;\nUSE `hiroie` ;\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_user`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_user` (\n  `user_id` INT NOT NULL AUTO_INCREMENT COMMENT 'ユーザID',\n  `user_name` VARCHAR(255) NOT NULL COMMENT 'ユーザ氏名',\n  `telephone` VARCHAR(20) NOT NULL COMMENT '電話番号。有効なユーザと重複を認めない。',\n  `mail` VARCHAR(255) NULL COMMENT 'メールアドレス。有効なユーザと重複を認めない。アプリでは電話番号のみであるため必須項目ではない。',\n  `password` VARCHAR(255) NOT NULL COMMENT 'パスワード。要件は別途検討',\n  `paygent_id` INT NOT NULL COMMENT 'ペイジェントID',\n  `user_kana` VARCHAR(255) NULL COMMENT 'ユーザ氏名フリガナ',\n  `birthday` DATE NULL COMMENT '誕生日：会員登録時は記入しない',\n  `gender` INT NULL COMMENT '性別：会員登録時は記入しない',\n  `zipcode` VARCHAR(10) NULL COMMENT '郵便番号。ハイフン無し',\n  `prefecture` VARCHAR(255) NULL COMMENT '都道府県',\n  `city` VARCHAR(255) NULL COMMENT '市区町村',\n  `town` VARCHAR(255) NULL COMMENT '番地、建物',\n  `regist_date` DATETIME NOT NULL,\n  `withdraw_date` DATETIME NULL,\n  `card_last4` VARCHAR(4) NULL COMMENT 'クレジットカード末尾4桁',\n  `card_expire_year` INT NULL,\n  `card_expire_month` INT NULL,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`user_id`))\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`m_space`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`m_space` (\n  `space_id` INT NOT NULL AUTO_INCREMENT,\n  `region_id` INT NOT NULL DEFAULT 0 COMMENT '地域コード。地域によって料金が変わるかも、を想定。',\n  `space_name` VARCHAR(255) NOT NULL COMMENT 'スペースの説明',\n  `area` DECIMAL(3,1) NOT NULL COMMENT '畳数を数値で示す',\n  `capacity` INT NOT NULL COMMENT 'Mサイズダンボール換算の容量',\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`space_id`))\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`m_space_charge`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`m_space_charge` (\n  `id` INT NOT NULL AUTO_INCREMENT,\n  `space_id` INT NOT NULL,\n  `region_id` INT NOT NULL,\n  `price` DECIMAL NOT NULL COMMENT '税抜き価格',\n  `start_at` DATETIME NULL COMMENT '適用開始日',\n  `end_at` DATETIME NULL COMMENT '適用終了日',\n  `comment` TEXT NULL,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`id`),\n  UNIQUE INDEX `uniq_idx` (`space_id` ASC, `region_id` ASC),\n  CONSTRAINT `fk_m_space_charge_space_id`\n    FOREIGN KEY (`space_id`)\n    REFERENCES `hiroie`.`m_space` (`space_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION)\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_cost`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_cost` (\n  `id` INT NOT NULL AUTO_INCREMENT,\n  `source_id` INT NOT NULL COMMENT '原価発生元のID。',\n  `source_type` INT NOT NULL COMMENT '原価種別。保管料、手数料、材料原価など。',\n  `cost` DECIMAL NOT NULL COMMENT '税込み',\n  `tax` DECIMAL NULL,\n  `discount_cost` INT NULL,\n  `comment` TEXT NULL,\n  `canceled` INT NOT NULL DEFAULT 0,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`id`))\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_sales`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_sales` (\n  `sales_id` INT NOT NULL AUTO_INCREMENT,\n  `sales_date` DATETIME NOT NULL,\n  `sales_type` INT NOT NULL COMMENT '売上種別。契約料、商品、送料など。',\n  `user_id` INT NOT NULL,\n  `total_amount` DECIMAL NOT NULL COMMENT '税込み',\n  `total_tax` DECIMAL NULL,\n  `discount_amount` INT NULL,\n  `source_id` INT NOT NULL COMMENT '売上発生元のID。t_purchase,t_contractなど',\n  `comment` TEXT NULL,\n  `canceled` INT NOT NULL DEFAULT 0,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`sales_id`),\n  INDEX `fk_t_sales_user_id_idx` (`user_id` ASC),\n  CONSTRAINT `fk_t_sales_user_id`\n    FOREIGN KEY (`user_id`)\n    REFERENCES `hiroie`.`t_user` (`user_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION)\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`m_goods`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`m_goods` (\n  `goods_id` INT NOT NULL AUTO_INCREMENT,\n  `goods_type` INT NOT NULL,\n  `goods_name` VARCHAR(255) NOT NULL,\n  `price` DECIMAL NULL,\n  `tax` DECIMAL NULL,\n  `comment` TEXT NULL,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0 COMMENT '論理削除用フラグ',\n  PRIMARY KEY (`goods_id`))\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`m_warehouse`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`m_warehouse` (\n  `warehouse_id` INT NOT NULL AUTO_INCREMENT,\n  `region_id` INT NOT NULL DEFAULT 0 COMMENT '地域コード。',\n  `name` VARCHAR(255) NOT NULL,\n  `zipcode` VARCHAR(10) NOT NULL,\n  `prefecture` VARCHAR(255) NOT NULL COMMENT '都道府県',\n  `city` VARCHAR(255) NOT NULL,\n  `town` VARCHAR(255) NOT NULL,\n  `telephone` VARCHAR(20) NOT NULL,\n  `mail` VARCHAR(255) NOT NULL,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`warehouse_id`))\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`m_category`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`m_category` (\n  `category_id` INT NOT NULL AUTO_INCREMENT,\n  `name` VARCHAR(255) NOT NULL,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`category_id`))\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`m_baggage_type`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`m_baggage_type` (\n  `baggage_type_id` INT NOT NULL AUTO_INCREMENT,\n  `name` VARCHAR(255) NOT NULL,\n  `category_id` INT NOT NULL,\n  `size_detail` VARCHAR(255) NULL COMMENT '荷物ごとの大きさ',\n  `baggage_size_type` INT NOT NULL,\n  `space_size` DECIMAL(5,1) NOT NULL COMMENT 'スペース計算用サイズ',\n  `display_mode` INT NOT NULL COMMENT '旧仕様と新仕様で表示する荷物種別を変える場合に使用する。',\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`baggage_type_id`),\n  INDEX `fk_category_id_idx` (`category_id` ASC),\n  CONSTRAINT `fk_m_baggage_type_category_id`\n    FOREIGN KEY (`category_id`)\n    REFERENCES `hiroie`.`m_category` (`category_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION)\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_photo_group`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_photo_group` (\n  `photo_group_id` INT NOT NULL AUTO_INCREMENT,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`photo_group_id`))\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_baggage`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_baggage` (\n  `baggage_id` INT NOT NULL AUTO_INCREMENT COMMENT '荷物管理番号。システムで一意。',\n  `warehouse_id` INT NOT NULL COMMENT '倉庫ID',\n  `user_id` INT NOT NULL,\n  `baggage_type_id` INT NOT NULL COMMENT '荷物種別',\n  `photo_group_id` INT NULL,\n  `status` INT NOT NULL COMMENT '荷物の状態',\n  `title` VARCHAR(255) NULL COMMENT 'マイページの写真下部に表示する文字列。入力は業務アプリ',\n  `description` VARCHAR(255) NULL,\n  `code` VARCHAR(255) NULL COMMENT '荷物識別用コード。要検討。バーコード等を想定。',\n  `location` VARCHAR(255) NULL,\n  `request_at` DATETIME NULL,\n  `store_at` DATETIME NULL COMMENT '入庫日',\n  `ship_at` DATETIME NULL COMMENT '出庫日',\n  `comment` TEXT NULL,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`baggage_id`),\n  INDEX `fk_user_id_idx` (`user_id` ASC),\n  INDEX `fk_warehouse_id_idx` (`warehouse_id` ASC),\n  INDEX `fk_baggage_type_id_idx` (`baggage_type_id` ASC),\n  INDEX `fk_photo_group_id_idx` (`photo_group_id` ASC),\n  CONSTRAINT `fk_t_baggage_user_id`\n    FOREIGN KEY (`user_id`)\n    REFERENCES `hiroie`.`t_user` (`user_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION,\n  CONSTRAINT `fk_t_baggage_warehouse_id`\n    FOREIGN KEY (`warehouse_id`)\n    REFERENCES `hiroie`.`m_warehouse` (`warehouse_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION,\n  CONSTRAINT `fk_t_baggage_baggage_type_id`\n    FOREIGN KEY (`baggage_type_id`)\n    REFERENCES `hiroie`.`m_baggage_type` (`baggage_type_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION,\n  CONSTRAINT `fk_t_baggage_photo_group_id`\n    FOREIGN KEY (`photo_group_id`)\n    REFERENCES `hiroie`.`t_photo_group` (`photo_group_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION)\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_contract`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_contract` (\n  `contract_id` INT NOT NULL AUTO_INCREMENT,\n  `user_id` INT NOT NULL,\n  `space_id` INT NOT NULL,\n  `status` INT NOT NULL COMMENT '契約状態。0:契約中,1:退会済',\n  `contract_type` INT NOT NULL DEFAULT 0 COMMENT '契約タイプ。未使用。',\n  `contract_date` DATETIME NOT NULL COMMENT '契約開始日時',\n  `end_contract_date` DATETIME NULL COMMENT '契約終了日時',\n  `renewal_date` DATETIME NOT NULL COMMENT '次回契約更新日',\n  `contract_term` INT NULL COMMENT '初回契約時に選択する契約期間。',\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0 COMMENT '論理削除用フラグ',\n  PRIMARY KEY (`contract_id`),\n  INDEX `fk_user_id_idx` (`user_id` ASC),\n  INDEX `fk_space_id_idx` (`space_id` ASC),\n  CONSTRAINT `fk_t_contract_user_id`\n    FOREIGN KEY (`user_id`)\n    REFERENCES `hiroie`.`t_user` (`user_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION,\n  CONSTRAINT `fk_t_contract_space_id`\n    FOREIGN KEY (`space_id`)\n    REFERENCES `hiroie`.`m_space` (`space_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION)\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`m_campaign`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`m_campaign` (\n  `campaign_id` INT NOT NULL AUTO_INCREMENT,\n  `campaign_type` INT NOT NULL,\n  `campaign_name` VARCHAR(255) NOT NULL,\n  `coupon` VARCHAR(255) NOT NULL,\n  `description` TEXT NULL,\n  `start_at` DATETIME NULL,\n  `end_at` DATETIME NULL,\n  `discount_space_price` DECIMAL NULL COMMENT 'スペース料金値引き額',\n  `discount_store_price` DECIMAL NULL COMMENT '集荷送料値引き額',\n  `discount_shipping_price` DECIMAL NULL COMMENT '引き出し送料値引額',\n  `discount_option1_price` DECIMAL NULL COMMENT '値引き額(予備)',\n  `discount_option2_price` DECIMAL NULL COMMENT '値引き額(予備)',\n  `discount_space_price_per` DECIMAL(4,1) NULL COMMENT 'スペース料金値引き額',\n  `discount_store_price_per` DECIMAL(4,1) NULL COMMENT '集荷送料値引き額',\n  `discount_shipping_price_per` DECIMAL(4,1) NULL COMMENT '引き出し送料値引額',\n  `discount_option1_price_per` DECIMAL(4,1) NULL COMMENT '値引き額(予備)',\n  `discount_option2_price_per` DECIMAL(4,1) NULL COMMENT '値引き額(予備)',\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0 COMMENT '論理削除用フラグ',\n  PRIMARY KEY (`campaign_id`))\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_purchase`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_purchase` (\n  `purchase_id` INT NOT NULL AUTO_INCREMENT,\n  `goods_id` INT NOT NULL,\n  `user_id` INT NOT NULL,\n  `status` INT NOT NULL COMMENT '注文の状態。在庫確認中、引き当て済み、配送済みなど。',\n  `request_at` DATETIME NOT NULL,\n  `canceled` INT NOT NULL DEFAULT 0,\n  `canceled_at` DATETIME NULL,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`purchase_id`),\n  INDEX `fk_user_id_idx` (`user_id` ASC),\n  CONSTRAINT `fk_t_purchase_user_id`\n    FOREIGN KEY (`user_id`)\n    REFERENCES `hiroie`.`t_user` (`user_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION,\n  CONSTRAINT `fk_t_purchase_goods_id`\n    FOREIGN KEY (`goods_id`)\n    REFERENCES `hiroie`.`m_goods` (`goods_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION)\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_baggage_log`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_baggage_log` (\n  `id` INT NOT NULL AUTO_INCREMENT,\n  `baggage_id` INT NOT NULL,\n  `warehouse_id` INT NOT NULL COMMENT '倉庫ID',\n  `user_id` INT NOT NULL,\n  `baggage_type_id` INT NOT NULL COMMENT '荷物種別',\n  `photo_group_id` INT NULL,\n  `status` INT NOT NULL COMMENT '荷物の状態',\n  `title` VARCHAR(255) NULL COMMENT 'マイページの写真下部に表示する文字列。入力は業務アプリ',\n  `description` VARCHAR(255) NULL,\n  `code` VARCHAR(255) NULL COMMENT '荷物識別用コード。要検討。バーコード等を想定。',\n  `location` VARCHAR(255) NULL,\n  `request_at` DATETIME NULL,\n  `store_at` DATETIME NULL COMMENT '入庫日',\n  `ship_at` DATETIME NULL COMMENT '出庫日',\n  `comment` TEXT NULL,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`id`),\n  INDEX `fk_user_id_idx` (`user_id` ASC),\n  INDEX `fk_warehouse_id_idx` (`warehouse_id` ASC),\n  INDEX `fk_baggage_type_id_idx` (`baggage_type_id` ASC),\n  INDEX `fk_baggage_id_idx` (`baggage_id` ASC),\n  CONSTRAINT `fk_t_baggage_log_user_id`\n    FOREIGN KEY (`user_id`)\n    REFERENCES `hiroie`.`t_user` (`user_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION,\n  CONSTRAINT `fk_t_baggage_log_warehouse_id`\n    FOREIGN KEY (`warehouse_id`)\n    REFERENCES `hiroie`.`m_warehouse` (`warehouse_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION,\n  CONSTRAINT `fk_t_baggage_log_baggage_type_id`\n    FOREIGN KEY (`baggage_type_id`)\n    REFERENCES `hiroie`.`m_baggage_type` (`baggage_type_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION,\n  CONSTRAINT `fk_t_baggage_log_baggage_id`\n    FOREIGN KEY (`baggage_id`)\n    REFERENCES `hiroie`.`t_baggage` (`baggage_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION)\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_system_user`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_system_user` (\n  `system_user_id` INT NOT NULL AUTO_INCREMENT,\n  `user_name` VARCHAR(255) NOT NULL,\n  `telephone` VARCHAR(20) NOT NULL,\n  `password` VARCHAR(255) NOT NULL,\n  `type` INT NOT NULL,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`system_user_id`))\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_request`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_request` (\n  `request_id` INT NOT NULL AUTO_INCREMENT,\n  `user_id` INT NOT NULL,\n  `request_type` INT NOT NULL COMMENT '収納、取り出し',\n  `system_user_id` INT NULL,\n  `status` INT NOT NULL COMMENT '依頼の状態。集荷依頼受付、収納完了、など。',\n  `user_name` VARCHAR(255) NOT NULL COMMENT 'ユーザ氏名',\n  `user_kana` VARCHAR(255) NOT NULL,\n  `zipcode` VARCHAR(10) NOT NULL,\n  `prefecture` VARCHAR(255) NOT NULL,\n  `city` VARCHAR(255) NOT NULL,\n  `town` VARCHAR(255) NOT NULL,\n  `telephone` VARCHAR(20) NOT NULL,\n  `mail` VARCHAR(255) NULL,\n  `visit_date` DATETIME NOT NULL COMMENT '引き取り、お届け希望日',\n  `visit_time` INT NOT NULL COMMENT '引き取り、お届け希望時間帯',\n  `call_date` DATETIME NULL COMMENT '電話希望日',\n  `call_time` INT NULL COMMENT '電話希望時間帯',\n  `coupon` VARCHAR(255) NULL,\n  `comment` TEXT NULL,\n  `canceled` INT NOT NULL DEFAULT 0,\n  `canceled_at` DATETIME NULL,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  INDEX `fk_user_id_idx` (`user_id` ASC),\n  PRIMARY KEY (`request_id`),\n  INDEX `fk_t_request_system_user_id_idx` (`system_user_id` ASC),\n  CONSTRAINT `fk_t_request_user_id`\n    FOREIGN KEY (`user_id`)\n    REFERENCES `hiroie`.`t_user` (`user_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION,\n  CONSTRAINT `fk_t_request_system_user_id`\n    FOREIGN KEY (`system_user_id`)\n    REFERENCES `hiroie`.`t_system_user` (`system_user_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION)\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_request_baggage`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_request_baggage` (\n  `request_id` INT NOT NULL,\n  `user_id` INT NOT NULL,\n  `baggage_id` INT NOT NULL,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  INDEX `fk_ t_request_baggage_user_id_idx` (`user_id` ASC),\n  PRIMARY KEY (`request_id`, `user_id`, `baggage_id`),\n  INDEX `fk_ t_request_baggage_baggage_id_idx` (`baggage_id` ASC),\n  CONSTRAINT `fk_t_request_baggage_user_id`\n    FOREIGN KEY (`user_id`)\n    REFERENCES `hiroie`.`t_user` (`user_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION,\n  CONSTRAINT `fk_t_request_baggage_baggage_id`\n    FOREIGN KEY (`baggage_id`)\n    REFERENCES `hiroie`.`t_baggage` (`baggage_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION,\n  CONSTRAINT `fk_t_request_baggage_request_id`\n    FOREIGN KEY (`request_id`)\n    REFERENCES `hiroie`.`t_request` (`request_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION)\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_request_log`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_request_log` (\n  `id` INT NOT NULL AUTO_INCREMENT,\n  `request_id` INT NOT NULL,\n  `user_id` INT NOT NULL,\n  `request_type` INT NOT NULL COMMENT '収納、取り出し',\n  `system_user_id` INT NULL,\n  `status` INT NOT NULL,\n  `user_name` VARCHAR(255) NOT NULL COMMENT 'ユーザ氏名',\n  `zipcode` VARCHAR(10) NOT NULL,\n  `user_kana` VARCHAR(255) NOT NULL,\n  `prefecture` VARCHAR(255) NOT NULL,\n  `city` VARCHAR(255) NOT NULL,\n  `town` VARCHAR(255) NOT NULL,\n  `mail` VARCHAR(255) NULL,\n  `telephone` VARCHAR(20) NOT NULL,\n  `visit_date` DATETIME NOT NULL COMMENT '引き取り、お届け希望日',\n  `visit_time` INT NOT NULL COMMENT '引き取り、お届け希望時間帯',\n  `call_date` DATETIME NULL,\n  `call_time` INT NULL,\n  `coupon` VARCHAR(255) NULL,\n  `comment` TEXT NULL,\n  `canceled` INT NOT NULL DEFAULT 0,\n  `canceled_at` DATETIME NULL,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  INDEX `fk_user_id_idx` (`user_id` ASC),\n  PRIMARY KEY (`id`),\n  INDEX `fk_request_id_idx` (`request_id` ASC),\n  INDEX `fk_t_request_log_system_user_id_idx` (`system_user_id` ASC),\n  CONSTRAINT `fk_t_request_log_user_id`\n    FOREIGN KEY (`user_id`)\n    REFERENCES `hiroie`.`t_user` (`user_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION,\n  CONSTRAINT `fk_t_request_log_request_id`\n    FOREIGN KEY (`request_id`)\n    REFERENCES `hiroie`.`t_request` (`request_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION,\n  CONSTRAINT `fk_t_request_log_system_user_id`\n    FOREIGN KEY (`system_user_id`)\n    REFERENCES `hiroie`.`t_system_user` (`system_user_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION)\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`m_rank`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`m_rank` (\n  `rank_id` INT NOT NULL AUTO_INCREMENT,\n  `rank_name` VARCHAR(255) NOT NULL,\n  `requirement` INT NOT NULL COMMENT '当該ランク取得に必要なポイント',\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`rank_id`))\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_rank`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_rank` (\n  `user_id` INT NOT NULL,\n  `rank_id` INT NOT NULL,\n  `point` INT NOT NULL COMMENT '現在のランクポイント',\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  INDEX `fk_user_id_idx` (`user_id` ASC),\n  INDEX `fk_rank_id_idx` (`rank_id` ASC),\n  PRIMARY KEY (`user_id`),\n  CONSTRAINT `fk_t_rank_user_id`\n    FOREIGN KEY (`user_id`)\n    REFERENCES `hiroie`.`t_user` (`user_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION,\n  CONSTRAINT `fk_t_rank_rank_id`\n    FOREIGN KEY (`rank_id`)\n    REFERENCES `hiroie`.`m_rank` (`rank_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION)\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_photo`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_photo` (\n  `photo_id` INT NOT NULL AUTO_INCREMENT,\n  `photo_group_id` INT NOT NULL,\n  `file_name` VARCHAR(255) NOT NULL,\n  `thumbnail_S` VARCHAR(255) NULL,\n  `thumbnail_M` VARCHAR(255) NULL,\n  `thumbnail_L` VARCHAR(255) NULL,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`photo_id`),\n  INDEX `fk_photo_group_id_idx` (`photo_group_id` ASC),\n  CONSTRAINT `fk_t_photo_photo_group_id`\n    FOREIGN KEY (`photo_group_id`)\n    REFERENCES `hiroie`.`t_photo_group` (`photo_group_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION)\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_sms_auth`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_sms_auth` (\n  `id` INT NOT NULL AUTO_INCREMENT,\n  `auth_key` VARCHAR(40) NOT NULL COMMENT '電話番号のSHA1ハッシュ',\n  `auth_code` INT(4) NOT NULL COMMENT '認証コード',\n  `expire_at` DATETIME NOT NULL COMMENT '認証コード有効期限',\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`id`))\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_contract_log`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_contract_log` (\n  `id` INT NOT NULL AUTO_INCREMENT,\n  `contract_id` INT NOT NULL,\n  `user_id` INT NOT NULL,\n  `space_id` INT NOT NULL,\n  `status` INT NOT NULL COMMENT '契約状態。0:契約中,1:退会済',\n  `contract_type` INT NOT NULL DEFAULT 0 COMMENT '契約タイプ。未使用。',\n  `contract_date` DATETIME NOT NULL COMMENT '契約開始日時',\n  `end_contract_date` DATETIME NULL COMMENT '契約終了日時',\n  `renewal_date` DATETIME NOT NULL COMMENT '次回契約更新日',\n  `contract_term` INT NULL COMMENT '初回契約時に選択する契約期間。',\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0 COMMENT '論理削除用フラグ',\n  INDEX `fk_user_id_idx` (`user_id` ASC),\n  INDEX `fk_space_id_idx` (`space_id` ASC),\n  PRIMARY KEY (`id`),\n  INDEX `fk_t_contract_log_contact_id_idx` (`contract_id` ASC),\n  CONSTRAINT `fk_t_contract_log_user_id`\n    FOREIGN KEY (`user_id`)\n    REFERENCES `hiroie`.`t_user` (`user_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION,\n  CONSTRAINT `fk_t_contract_log_space_id`\n    FOREIGN KEY (`space_id`)\n    REFERENCES `hiroie`.`m_space` (`space_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION,\n  CONSTRAINT `fk_t_contract_log_contact_id`\n    FOREIGN KEY (`contract_id`)\n    REFERENCES `hiroie`.`t_contract` (`contract_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION)\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`m_tax`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`m_tax` (\n  `tax_id` INT NOT NULL AUTO_INCREMENT,\n  `tax_rate` FLOAT NOT NULL,\n  `start_at` DATETIME NOT NULL COMMENT '適用開始日時',\n  `end_at` DATETIME NOT NULL COMMENT '適用終了日時',\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`tax_id`))\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_campaign_log`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_campaign_log` (\n  `id` INT NOT NULL AUTO_INCREMENT,\n  `user_id` INT NOT NULL,\n  `campaign_id` INT NOT NULL,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`id`),\n  INDEX `fk_t_campaign_log_user_id_idx` (`user_id` ASC),\n  INDEX `fk_t_campaign_log_campaign_id_idx` (`campaign_id` ASC),\n  CONSTRAINT `fk_t_campaign_log_user_id`\n    FOREIGN KEY (`user_id`)\n    REFERENCES `hiroie`.`t_user` (`user_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION,\n  CONSTRAINT `fk_t_campaign_log_campaign_id`\n    FOREIGN KEY (`campaign_id`)\n    REFERENCES `hiroie`.`m_campaign` (`campaign_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION)\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_purchase_log`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_purchase_log` (\n  `id` INT NOT NULL AUTO_INCREMENT,\n  `purchase_id` INT NOT NULL,\n  `goods_id` INT NOT NULL,\n  `user_id` INT NOT NULL,\n  `status` INT NOT NULL COMMENT '注文の状態。在庫確認中、引き当て済み、配送済みなど。',\n  `request_at` DATETIME NOT NULL,\n  `canceled` INT NOT NULL DEFAULT 0,\n  `canceled_at` DATETIME NULL,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`id`),\n  INDEX `fk_user_id_idx` (`user_id` ASC),\n  INDEX `fk_t_purchase_log_purchase_id_idx` (`purchase_id` ASC),\n  INDEX `fk_t_purchase_log_goods_id_idx` (`goods_id` ASC),\n  CONSTRAINT `fk_t_purchase_log_user_id`\n    FOREIGN KEY (`user_id`)\n    REFERENCES `hiroie`.`t_user` (`user_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION,\n  CONSTRAINT `fk_t_purchase_log_purchase_id`\n    FOREIGN KEY (`purchase_id`)\n    REFERENCES `hiroie`.`t_purchase` (`purchase_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION,\n  CONSTRAINT `fk_t_purchase_log_goods_id`\n    FOREIGN KEY (`goods_id`)\n    REFERENCES `hiroie`.`m_goods` (`goods_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION)\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_promotion`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_promotion` (\n  `promotion_id` INT NOT NULL AUTO_INCREMENT,\n  `user_id` INT NOT NULL,\n  `promotion_code` VARCHAR(255) NOT NULL COMMENT '状態。招待中、ユーザ登録完了、など。',\n  `description` TEXT NULL,\n  `message` TEXT NULL,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  INDEX `fk_user_id_idx` (`user_id` ASC),\n  PRIMARY KEY (`promotion_id`),\n  CONSTRAINT `fk_ t_promotion_user_id`\n    FOREIGN KEY (`user_id`)\n    REFERENCES `hiroie`.`t_user` (`user_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION)\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_promotion_history`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_promotion_history` (\n  `id` INT NOT NULL AUTO_INCREMENT,\n  `promotion_id` INT NOT NULL,\n  `invited_user_id` INT NOT NULL COMMENT 'プロモーションコードを利用して登録したユーザID。',\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`id`),\n  INDEX `fk_ t_share_promotion_id_idx` (`promotion_id` ASC),\n  INDEX `fk_t_promotion_history_invited_user_id_idx` (`invited_user_id` ASC),\n  CONSTRAINT `fk_t_promotion_history_promotion_id`\n    FOREIGN KEY (`promotion_id`)\n    REFERENCES `hiroie`.`t_promotion` (`promotion_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION,\n  CONSTRAINT `fk_t_promotion_history_invited_user_id`\n    FOREIGN KEY (`invited_user_id`)\n    REFERENCES `hiroie`.`t_user` (`user_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION)\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`m_code`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`m_code` (\n  `id` INT NOT NULL AUTO_INCREMENT,\n  `code_type` INT NOT NULL,\n  `code_value` VARCHAR(45) NOT NULL,\n  `code_name` VARCHAR(45) NULL,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0 COMMENT '論理削除用フラグ',\n  PRIMARY KEY (`id`))\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`m_cost`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`m_cost` (\n  `cost_id` INT NOT NULL AUTO_INCREMENT,\n  `cost_type` INT NOT NULL,\n  `cost_name` VARCHAR(255) NOT NULL,\n  `cost` DECIMAL NOT NULL COMMENT '税込み価格',\n  `tax` DECIMAL NOT NULL COMMENT '外税',\n  `comment` TEXT NULL,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`cost_id`))\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_mail_auth`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_mail_auth` (\n  `id` INT NOT NULL AUTO_INCREMENT,\n  `user_name` VARCHAR(255) NOT NULL COMMENT 'ユーザ氏名',\n  `mail` VARCHAR(255) NULL COMMENT 'メールアドレス。有効なユーザと重複を認めない。',\n  `telephone` VARCHAR(20) NOT NULL COMMENT '電話番号',\n  `password` VARCHAR(255) NOT NULL COMMENT 'パスワード。要件は別途検討',\n  `paygent_id` INT NOT NULL COMMENT 'ペイジェントID',\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`id`))\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_rank_log`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_rank_log` (\n  `id` INT NOT NULL AUTO_INCREMENT,\n  `user_id` INT NOT NULL,\n  `rank_id` INT NOT NULL,\n  `point` INT NOT NULL COMMENT '現在のランクポイント',\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  INDEX `fk_user_id_idx` (`user_id` ASC),\n  PRIMARY KEY (`id`),\n  INDEX `fk_rank_id_idx` (`rank_id` ASC),\n  CONSTRAINT `fk_t_rank_log_user_id`\n    FOREIGN KEY (`user_id`)\n    REFERENCES `hiroie`.`t_user` (`user_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION,\n  CONSTRAINT `fk_t_rank_log_rank_id`\n    FOREIGN KEY (`rank_id`)\n    REFERENCES `hiroie`.`m_rank` (`rank_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION)\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_address`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_address` (\n  `address_id` INT NOT NULL AUTO_INCREMENT,\n  `user_id` INT NOT NULL,\n  `user_name` VARCHAR(255) NOT NULL COMMENT 'ユーザ氏名',\n  `zipcode` VARCHAR(10) NOT NULL,\n  `prefecture` VARCHAR(255) NOT NULL,\n  `city` VARCHAR(255) NOT NULL,\n  `address` VARCHAR(255) NOT NULL,\n  `telephone` VARCHAR(20) NOT NULL,\n  `mail` VARCHAR(255) NULL,\n  `direction` VARCHAR(45) NULL COMMENT '引き取り、お届けで表示を分ける場合に使用する。',\n  `comment` TEXT NULL,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  INDEX `fk_user_id_idx` (`user_id` ASC),\n  PRIMARY KEY (`address_id`),\n  CONSTRAINT `fk_t_address_user_id`\n    FOREIGN KEY (`user_id`)\n    REFERENCES `hiroie`.`t_user` (`user_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION)\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`m_transport_charge`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`m_transport_charge` (\n  `id` INT NOT NULL AUTO_INCREMENT,\n  `baggage_type_id` INT NOT NULL,\n  `price` DECIMAL NOT NULL COMMENT '税込み価格',\n  `tax` DECIMAL NOT NULL COMMENT '外税',\n  `start_at` DATETIME NULL COMMENT '適用開始日',\n  `end_at` DATETIME NULL COMMENT '適用終了日',\n  `comment` TEXT NULL,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`id`),\n  INDEX `fk_baggage_type_id_idx` (`baggage_type_id` ASC),\n  CONSTRAINT `fk_m_transport_charge_baggage_type_id`\n    FOREIGN KEY (`baggage_type_id`)\n    REFERENCES `hiroie`.`m_baggage_type` (`baggage_type_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION)\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`m_zipcode`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`m_zipcode` (\n  `id` INT NOT NULL AUTO_INCREMENT,\n  `zipcode` INT NULL,\n  `prefecture_kana` VARCHAR(255) NULL,\n  `city_kana` VARCHAR(255) NULL,\n  `town_kana` VARCHAR(255) NULL,\n  `prefecture` VARCHAR(255) NULL,\n  `city` VARCHAR(255) NULL,\n  `town` VARCHAR(255) NULL,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`id`))\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`m_apikey`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`m_apikey` (\n  `id` INT NOT NULL AUTO_INCREMENT,\n  `apikey` VARCHAR(45) NOT NULL,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`id`))\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_user_device_token`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_user_device_token` (\n  `id` INT NOT NULL AUTO_INCREMENT,\n  `user_id` INT NOT NULL COMMENT 'ユーザIDを外部キーにする？',\n  `device_token` VARCHAR(32) NOT NULL,\n  `device_type` INT NOT NULL COMMENT '1:iOS, 2:Android(将来の開発のため)',\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`id`))\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_message`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_message` (\n  `message_id` INT NOT NULL AUTO_INCREMENT,\n  `user_id` INT NOT NULL,\n  `source_id` INT NULL COMMENT 'request_log#id,contract_log#id',\n  `type` INT NOT NULL COMMENT 'メッセージ種別',\n  `title` VARCHAR(255) NOT NULL COMMENT 'ユーザ氏名',\n  `sub_title` VARCHAR(255) NULL,\n  `opened` TINYINT(1) NOT NULL COMMENT '既読管理用フラグ',\n  `send_date` DATETIME NULL,\n  `message` TEXT NULL,\n  `comment` TEXT NULL,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  INDEX `fk_user_id_idx` (`user_id` ASC),\n  PRIMARY KEY (`message_id`),\n  CONSTRAINT `fk_t_message_user_id`\n    FOREIGN KEY (`user_id`)\n    REFERENCES `hiroie`.`t_user` (`user_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION)\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_sms_message_log`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_sms_message_log` (\n  `id` INT NOT NULL AUTO_INCREMENT,\n  `type` INT NOT NULL,\n  `sid` VARCHAR(255) NOT NULL,\n  `date_created` VARCHAR(255) NOT NULL,\n  `date_updated` VARCHAR(255) NOT NULL,\n  `date_sent` VARCHAR(255) NULL,\n  `account_sid` VARCHAR(255) NOT NULL,\n  `to` VARCHAR(255) NOT NULL,\n  `from` VARCHAR(255) NOT NULL,\n  `body` VARCHAR(255) NULL,\n  `status` VARCHAR(255) NULL,\n  `direction` VARCHAR(255) NULL,\n  `api_version` VARCHAR(45) NULL,\n  `price` DECIMAL NULL,\n  `price_unit` VARCHAR(45) NULL,\n  `uri` VARCHAR(255) NULL,\n  `num_segments` VARCHAR(255) NULL,\n  `t_sms_message_logcol` VARCHAR(45) NULL,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`id`))\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_sales_details_baggage`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_sales_details_baggage` (\n  `sales_details_id` INT NOT NULL AUTO_INCREMENT,\n  `sales_id` INT NOT NULL,\n  `baggage_id` INT NOT NULL,\n  `sales_price` DECIMAL NOT NULL,\n  `tax` DECIMAL NOT NULL,\n  `tax_rate` DECIMAL(3,2) NOT NULL,\n  `tax_type` INT NOT NULL COMMENT '内税、外税、非課税',\n  `memo` TEXT NOT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`sales_details_id`),\n  INDEX `fk_t_sales_details_t_sales1_idx` (`sales_id` ASC),\n  INDEX `fk_t_sales_details_baggage_id_idx` (`baggage_id` ASC),\n  CONSTRAINT `fk_t_sales_details_t_sales`\n    FOREIGN KEY (`sales_id`)\n    REFERENCES `hiroie`.`t_sales` (`sales_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION,\n  CONSTRAINT `fk_t_sales_details_baggage_id`\n    FOREIGN KEY (`baggage_id`)\n    REFERENCES `hiroie`.`t_baggage` (`baggage_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION)\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_promotion_discount`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_promotion_discount` (\n  `id` INT NOT NULL,\n  `user_id` INT NOT NULL,\n  `promotion_id` INT NOT NULL,\n  `discount_amount` DECIMAL NOT NULL,\n  `status` INT NOT NULL,\n  `apply_at` DATETIME NULL,\n  `memo` TEXT NULL,\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`id`),\n  INDEX `fk_user_id_idx` (`user_id` ASC),\n  INDEX `fk_promotion_id_idx` (`promotion_id` ASC),\n  CONSTRAINT `fk_t_promotion_discount_user_id`\n    FOREIGN KEY (`user_id`)\n    REFERENCES `hiroie`.`t_user` (`user_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION,\n  CONSTRAINT `fk_t_promotion_discount_promotion_id`\n    FOREIGN KEY (`promotion_id`)\n    REFERENCES `hiroie`.`t_promotion` (`promotion_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION)\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_notification_message`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_notification_message` (\n  `id` INT NOT NULL AUTO_INCREMENT,\n  `title` VARCHAR(255) NOT NULL COMMENT 'Push通知で表示されるタイトル。配信時にt_message.titleにも入る。',\n  `message` TEXT NOT NULL COMMENT '配信時にt_message.messageに入る、メッセージの本文',\n  `publish_at` DATETIME NOT NULL COMMENT '配信日時',\n  `published` INT NOT NULL DEFAULT 0 COMMENT '0:未配信, 1:配信済み',\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`id`))\nENGINE = InnoDB;\n\n\n-- -----------------------------------------------------\n-- Table `hiroie`.`t_notification_queue`\n-- -----------------------------------------------------\nCREATE TABLE IF NOT EXISTS `hiroie`.`t_notification_queue` (\n  `id` INT NOT NULL AUTO_INCREMENT,\n  `message` VARCHAR(255) NOT NULL COMMENT 'Push通知で配信するタイトル',\n  `badge` INT NULL DEFAULT 0 COMMENT 'Push通知時にアプリアイコン上に表示されるバッジの数(iOSのみ, オプション)',\n  `sound` VARCHAR(255) NULL COMMENT 'Push通知時に鳴らすサウンド (iOSのみ, オプション)',\n  `device_token` VARCHAR(255) NOT NULL COMMENT 'デバイストークン',\n  `device_type` INT NOT NULL COMMENT '1:iOS, 2:Android(将来の開発のため)',\n  `sent_at` DATETIME NULL COMMENT '送信処理実行日時',\n  `status` INT NOT NULL DEFAULT 0 COMMENT '0:未処理, 1:送信済み, 2:送信エラー(要 再送信), 9:送信エラー(送信中止)',\n  `error_message` VARCHAR(255) NULL COMMENT 'Push通知のライブラリから返ってきたエラーメッセージを格納する。',\n  `create_at` DATETIME NULL,\n  `create_by` INT NULL,\n  `update_at` DATETIME NULL,\n  `update_by` INT NULL,\n  `deleted` INT NOT NULL DEFAULT 0,\n  PRIMARY KEY (`id`))\n  \nENGINE = InnoDB;\n\n\nSET SQL_MODE=@OLD_SQL_MODE;\nSET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;\nSET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;\n","markers":{"markers":{"1":{"id":1,"range":[[1217,35],[1217,35]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":9,"goalBufferRange":null,"autoscroll":true},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"filePath":"/Users/kwatanabe/git/whiteplus/hiroie/hiroie_api_develop/docs/db/hiroie_ddl.sql","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"53935039ae8529271cbcb0a288adbdd563821b0a","deserializer":"TextBuffer"}],"deserializer":"Project"},"workspace":{"paneContainer":{"root":{"items":[{"id":9,"softTabs":true,"scrollTop":22629,"scrollLeft":0,"displayBuffer":{"id":10,"softWrap":false,"editorWidthInChars":101,"tokenizedBuffer":{"bufferPath":"/Users/kwatanabe/git/whiteplus/hiroie/hiroie_api_develop/docs/db/hiroie_ddl.sql","tabLength":4,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"}],"activeItemUri":"/Users/kwatanabe/git/whiteplus/hiroie/hiroie_api_develop/docs/db/hiroie_ddl.sql","focused":false,"active":true,"deserializer":"Pane"},"deserializer":"PaneContainer"},"fullScreen":false,"deserializer":"Workspace"},"packageStates":{"find-and-replace":{"viewState":{"findHistory":["===","t_noti"],"replaceHistory":[],"modelState":{"useRegex":false,"inCurrentSelection":false,"caseSensitive":false}}},"fuzzy-finder":{"/Users/kwatanabe/git/whiteplus/hiroie/hiroie_api_develop/docs/db/hiroie_ddl.sql":1396853152344},"keybinding-resolver":{"attached":false},"metrics":{"sessionLength":2161845},"tree-view":{"directoryExpansionStates":{},"selectedPath":"/Users/kwatanabe/git/whiteplus/hiroie/hiroie_api_develop/docs/db/hiroie_ddl.sql","hasFocus":false,"attached":true,"scrollLeft":45,"scrollTop":0,"width":200}}}