{"mode":"editor","version":1,"windowDimensions":{"x":720,"y":102,"width":1023,"height":1024},"syntax":{"deserializer":"Syntax","grammarOverridesByPath":{}},"project":{"path":"/Users/kwatanabe/git/gists/sound_composer/README.md","buffers":[{"text":"```bash\n$ say -o Modulating_Phase -v Victoria \"Modulating Phase\"\n$ ffmpeg -i Modulating_Phase.aiff -ar 11025 -ab 8 1.mp3\n$ afplay 1.mp3 # play your sound\n```\n","markers":{"markers":{"1":{"id":1,"range":[[1,2],[1,56]],"tailed":true,"reversed":true,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":9,"goalBufferRange":null},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[{"patches":[{"oldRange":[[0,0],[0,0]],"newRange":[[0,0],[0,2]],"oldText":"","newText":"``","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[0,2],[0,2]],"newRange":[[0,2],[0,3]],"oldText":"","newText":"`","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[0,3],[0,3]],"newRange":[[0,3],[1,0]],"oldText":"","newText":"\n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[1,0],[1,0]],"newRange":[[1,0],[1,0]],"oldText":"","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[1,0],[1,0]],"newRange":[[1,0],[1,2]],"oldText":"","newText":"``","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[1,2],[1,2]],"newRange":[[1,2],[1,3]],"oldText":"","newText":"`","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[0,3],[0,3]],"newRange":[[0,3],[1,0]],"oldText":"","newText":"\n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[1,0],[1,0]],"newRange":[[1,0],[1,0]],"oldText":"","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[1,0],[1,0]],"newRange":[[1,0],[1,1]],"oldText":"","newText":"$","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[1,1],[1,1]],"newRange":[[1,1],[1,2]],"oldText":"","newText":" ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[1,2],[1,2]],"newRange":[[1,2],[1,3]],"oldText":"","newText":"s","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[1,3],[1,3]],"newRange":[[1,3],[1,4]],"oldText":"","newText":"a","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[1,4],[1,4]],"newRange":[[1,4],[1,5]],"oldText":"","newText":"y","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[1,5],[1,5]],"newRange":[[1,5],[1,6]],"oldText":"","newText":"-","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"reversed":false,"range":[[1,6],[1,6]]},"newParams":{"reversed":true,"range":[[1,5],[1,6]]},"deserializer":"MarkerPatch"},{"oldRange":[[1,5],[1,6]],"newRange":[[1,5],[1,5]],"oldText":"-","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[1,5],[1,5]],"newRange":[[1,5],[1,6]],"oldText":"","newText":" ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[1,6],[1,6]],"newRange":[[1,6],[1,7]],"oldText":"","newText":"-","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[1,7],[1,7]],"newRange":[[1,7],[1,8]],"oldText":"","newText":"o","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[1,8],[1,8]],"newRange":[[1,8],[1,9]],"oldText":"","newText":" ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[1,9],[1,9]],"newRange":[[1,9],[1,56]],"oldText":"","newText":"Modulating_Phase -v Victoria \"Modulating Phase\"","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[1,56],[1,56]],"newRange":[[1,56],[2,0]],"oldText":"","newText":"\n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[2,0],[2,0]],"newRange":[[2,0],[2,0]],"oldText":"","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[2,0],[2,0]],"newRange":[[2,0],[2,1]],"oldText":"","newText":"$","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[2,1],[2,1]],"newRange":[[2,1],[2,2]],"oldText":"","newText":" ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[2,2],[2,2]],"newRange":[[2,2],[2,55]],"oldText":"","newText":"ffmpeg -i Modulating_Phase.aiff -ar 11025 -ab 8 1.mp3","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[2,55],[2,55]],"newRange":[[2,55],[3,0]],"oldText":"","newText":"\n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[3,0],[3,0]],"newRange":[[3,0],[3,0]],"oldText":"","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,0],[3,0]],"newRange":[[3,0],[3,1]],"oldText":"","newText":"$","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,1],[3,1]],"newRange":[[3,1],[3,2]],"oldText":"","newText":" ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,2],[3,2]],"newRange":[[3,2],[3,16]],"oldText":"","newText":" afplay 1.mp3 ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,16],[3,16]],"newRange":[[3,16],[3,17]],"oldText":"","newText":" ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[3,17],[3,17]]},"newParams":{"range":[[3,16],[3,17]]},"deserializer":"MarkerPatch"},{"oldRange":[[3,16],[3,17]],"newRange":[[3,16],[3,16]],"oldText":" ","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,16],[3,16]],"newRange":[[3,16],[3,17]],"oldText":"","newText":"#","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,17],[3,17]],"newRange":[[3,17],[3,18]],"oldText":"","newText":" ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,18],[3,18]],"newRange":[[3,18],[3,19]],"oldText":"","newText":"p","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,19],[3,19]],"newRange":[[3,19],[3,20]],"oldText":"","newText":"l","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,20],[3,20]],"newRange":[[3,20],[3,21]],"oldText":"","newText":"a","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,21],[3,21]],"newRange":[[3,21],[3,22]],"oldText":"","newText":"y","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,22],[3,22]],"newRange":[[3,22],[3,23]],"oldText":"","newText":" ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,23],[3,23]],"newRange":[[3,23],[3,24]],"oldText":"","newText":"t","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,24],[3,24]],"newRange":[[3,24],[3,25]],"oldText":"","newText":"h","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[3,25],[3,25]]},"newParams":{"range":[[3,24],[3,25]]},"deserializer":"MarkerPatch"},{"oldRange":[[3,24],[3,25]],"newRange":[[3,24],[3,24]],"oldText":"h","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[3,24],[3,24]]},"newParams":{"range":[[3,23],[3,24]]},"deserializer":"MarkerPatch"},{"oldRange":[[3,23],[3,24]],"newRange":[[3,23],[3,23]],"oldText":"t","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,23],[3,23]],"newRange":[[3,23],[3,24]],"oldText":"","newText":"o","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[3,24],[3,24]]},"newParams":{"range":[[3,23],[3,24]]},"deserializer":"MarkerPatch"},{"oldRange":[[3,23],[3,24]],"newRange":[[3,23],[3,23]],"oldText":"o","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,23],[3,23]],"newRange":[[3,23],[3,24]],"oldText":"","newText":"y","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,24],[3,24]],"newRange":[[3,24],[3,25]],"oldText":"","newText":"o","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,25],[3,25]],"newRange":[[3,25],[3,26]],"oldText":"","newText":"u","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,26],[3,26]],"newRange":[[3,26],[3,27]],"oldText":"","newText":"r","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,27],[3,27]],"newRange":[[3,27],[3,28]],"oldText":"","newText":" ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,28],[3,28]],"newRange":[[3,28],[3,29]],"oldText":"","newText":"s","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,29],[3,29]],"newRange":[[3,29],[3,30]],"oldText":"","newText":"o","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,30],[3,30]],"newRange":[[3,30],[3,31]],"oldText":"","newText":"u","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,31],[3,31]],"newRange":[[3,31],[3,32]],"oldText":"","newText":"n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,32],[3,32]],"newRange":[[3,32],[3,33]],"oldText":"","newText":"d","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[4,3],[4,3]],"newRange":[[4,3],[5,0]],"oldText":"","newText":"\n","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"reversed":true},"newParams":{"reversed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[0,3],[0,3]],"newRange":[[0,3],[0,4]],"oldText":"","newText":"b","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[0,4],[0,4]],"newRange":[[0,4],[0,5]],"oldText":"","newText":"a","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[0,5],[0,5]],"newRange":[[0,5],[0,6]],"oldText":"","newText":"s","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[0,6],[0,6]],"newRange":[[0,6],[0,7]],"oldText":"","newText":"h","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"reversed":false,"range":[[3,3],[3,3]]},"newParams":{"reversed":true,"range":[[3,2],[3,3]]},"deserializer":"MarkerPatch"},{"oldRange":[[3,2],[3,3]],"newRange":[[3,2],[3,2]],"oldText":" ","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"}],"redoStack":[],"deserializer":"History"},"filePath":"/Users/kwatanabe/git/gists/sound_composer/README.md","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"192b14619ea33144ef10d20c655af7b6a550c173","deserializer":"TextBuffer"},{"text":"# -*- coding: utf-8 -*-\n\ntitle = ARGV[0]\nputs title\n`say -v Victoria \"#{title}\"`\n`say -o #{title} -v Victoria \"#{title}\"`\n`mkdir -p ./sound`\n`ffmpeg -i #{title}.aiff -ar 11025 -ab 8 sound/#{title}.mp3`\n`rm #{title}.aiff`\n# `afplay sound/#{title}.mp3`\n","markers":{"markers":{"1":{"id":1,"range":[[0,0],[0,0]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":22,"goalBufferRange":null},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[{"patches":[{"oldRange":[[8,0],[8,0]],"newRange":[[8,0],[9,0]],"oldText":"","newText":"# `afplay sound/#{title}.mp3`\n","normalizeLineEndings":{"normalizeLineEndings":false},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[8,0],[8,0]],"newRange":[[8,0],[9,0]],"oldText":"","newText":"`rm #{title}.aiff`\n","normalizeLineEndings":{"normalizeLineEndings":false},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"}],"redoStack":[],"deserializer":"History"},"filePath":"/Users/kwatanabe/git/gists/sound_composer/sound_creator.rb","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"0dd2ca089ee38e390a31989712bb7b2485b7239d","deserializer":"TextBuffer"},{"text":"var files = [\n    \"sounds/spreader50-65ms.wav\",\n    \"sounds/Modulating_Phase.mp3\",\n    \"sounds/Activating_Combat_Mode.mp3\",\n    \"sounds/Conflict_Resolved.mp3\",\n];\n\nif(typeof(webkitAudioContext)!==\"undefined\")\n    var audioctx = new webkitAudioContext();\nelse if(typeof(AudioContext)!==\"undefined\")\n    var audioctx = new AudioContext();\n\nvar source = null;\n\nvar convolver = audioctx.createConvolver();\nvar revlevel = audioctx.createGain();\nrevlevel.gain.value = 6;\nconvolver.connect(revlevel);\nrevlevel.connect(audioctx.destination);\n\nvar compressor = audioctx.createDynamicsCompressor();\nvar volume = audioctx.createGain();\n\nvar buffers = [];\nvar loadidx = 0;\nvar req = new XMLHttpRequest();\n\nfunction LoadBuffers() {\n    req.open(\"GET\", files[loadidx], true);\n    req.responseType = \"arraybuffer\";\n    req.onload = function() {\n        if(req.response) {\n            audioctx.decodeAudioData(req.response,function(b){\n                buffers[loadidx]=b;\n                if(++loadidx < files.length)\n                    LoadBuffers();\n            },function(){});\n        }\n        else\n            buffers[loadidx] = audioctx.createBuffer(VBArray(req.responseBody).toArray(), false);\n    };\n    req.send();\n}\nfunction Play(number) {\n    source = audioctx.createBufferSource();\n\n    source.buffer = buffers[number];\n    convolver.buffer = buffers[0];\n\n    source.connect(volume);\n    volume.gain.value = 1;\n    volume.connect(compressor);\n\n    compressor.connect(convolver);\n    compressor.connect(audioctx.destination);\n\n    source.start(0);\n}","markers":{"markers":{"1":{"id":1,"range":[[4,12],[4,29]],"tailed":true,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":26,"goalBufferRange":null},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"filePath":"/Users/kwatanabe/git/gists/sound_composer/sound.js","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"2ba3a6104bb6cfca00a529f844b280ec2532ccdf","deserializer":"TextBuffer"},{"text":"<!DOCTYPE html>\n<html>\n<head>\n<meta charset=\"utf-8\">\n<title>デモ：クライシスコアFFVIIのナビゲーション音声をHTML5でできる限り再現してみた</title>\n<link rel=\"shortcut icon\" type=\"image/x-icon\" href=\"/favicon.ico\">\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js\"></script>\n<script type=\"text/javascript\">\nvar files = [\n    \"sound/spreader50-65ms.wav\",\n    \"sound/Modulating_Phase.mp3\",\n    \"sound/Activating_Combat_Mode.mp3\",\n    \"sound/Conflict_Resolved.mp3\",\n];\n\nif(typeof(webkitAudioContext)!==\"undefined\")\n    var audioctx = new webkitAudioContext();\nelse if(typeof(AudioContext)!==\"undefined\")\n    var audioctx = new AudioContext();\n\nvar source = null;\n\n\n\nvar buffers = [];\nvar loadidx = 0;\nvar req = new XMLHttpRequest();\n\nfunction LoadBuffers() {\n    req.open(\"GET\", files[loadidx], true);\n    req.responseType = \"arraybuffer\";\n    req.onload = function() {\n        if(req.response) {\n            audioctx.decodeAudioData(req.response,function(b){\n                buffers[loadidx]=b;\n                if(++loadidx < files.length)\n                    LoadBuffers();\n            },function(){});\n        }\n        else\n            buffers[loadidx] = audioctx.createBuffer(VBArray(req.responseBody).toArray(), false);\n    };\n    req.send();\n}\nfunction Play(number) {\n    source = audioctx.createBufferSource();\n\n    var convolver = audioctx.createConvolver();\n    var revlevel = audioctx.createGain();\n    revlevel.gain.value = 6;\n    convolver.connect(revlevel);\n    revlevel.connect(audioctx.destination);\n\n    var compressor = audioctx.createDynamicsCompressor();\n    var volume = audioctx.createGain();\n\n    source.buffer = buffers[number];\n    convolver.buffer = buffers[0];\n\n    source.connect(volume);\n    volume.gain.value = 1;\n    volume.connect(compressor);\n\n    compressor.connect(convolver);\n    compressor.connect(audioctx.destination);\n\n    source.start(0);\n}\nfunction RawPlay(number) {\n    source = audioctx.createBufferSource();\n\n    source.buffer = buffers[number];\n\n    var compressor = audioctx.createDynamicsCompressor();\n    var volume = audioctx.createGain();\n\n    source.connect(volume);\n    volume.gain.value = 1;\n    volume.connect(compressor);\n\n    compressor.connect(audioctx.destination);\n\n    source.start(0);\n}\n</script>\n</head>\n<body onload=\"LoadBuffers()\">\n    <div class=\"navbar-wrapper\">\n<a class=\"btn btn-lg btn-primary\" href=\"#\" role=\"button\" onclick=\"Play(2)\">Activating Combat Mode</a>\n    </div><!-- /.container -->\n</body>\n</html>\n","markers":{"markers":{"1":{"id":1,"range":[[88,101],[88,101]],"tailed":false,"reversed":true,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":33,"goalBufferRange":null},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[{"patches":[{"oldRange":[[0,0],[0,0]],"newRange":[[0,0],[175,7]],"oldText":"","newText":"<!DOCTYPE html>\n<html>\n<head>\n<meta charset=\"utf-8\">\n<title>デモ：クライシスコアFFVIIのナビゲーション音声をHTML5でできる限り再現してみた</title>\n<link rel=\"shortcut icon\" type=\"image/x-icon\" href=\"/favicon.ico\">\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js\"></script>\n<link rel=\"stylesheet\" href=\"//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css\">\n<link rel=\"stylesheet\" href=\"//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css\">\n<script src=\"//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js\"></script>\n<link href=\"http://getbootstrap.com/examples/carousel/carousel.css\" rel=\"stylesheet\">\n<script type=\"text/javascript\">\nvar files = [\n    \"sounds/spreader50-65ms.wav\",\n    \"sounds/Modulating_Phase.mp3\",\n    \"sounds/Activating_Combat_Mode.mp3\",\n    \"sounds/Conflict_Resolved.mp3\",\n];\n \nif(typeof(webkitAudioContext)!==\"undefined\")\n    var audioctx = new webkitAudioContext();\nelse if(typeof(AudioContext)!==\"undefined\")\n    var audioctx = new AudioContext();\n \nvar source = null;\n\n\n\nvar buffers = [];\nvar loadidx = 0;\nvar req = new XMLHttpRequest();\n \nfunction LoadBuffers() {\n    req.open(\"GET\", files[loadidx], true);\n    req.responseType = \"arraybuffer\";\n    req.onload = function() {\n        if(req.response) {\n            audioctx.decodeAudioData(req.response,function(b){\n                buffers[loadidx]=b;\n                if(++loadidx < files.length)\n                    LoadBuffers();\n            },function(){});\n        }\n        else\n            buffers[loadidx] = audioctx.createBuffer(VBArray(req.responseBody).toArray(), false);\n    };\n    req.send();\n}\nfunction Play(number) {\n    source = audioctx.createBufferSource();\n\n    var convolver = audioctx.createConvolver();\n    var revlevel = audioctx.createGain();\n    revlevel.gain.value = 6;\n    convolver.connect(revlevel);\n    revlevel.connect(audioctx.destination);\n\n    var compressor = audioctx.createDynamicsCompressor();\n    var volume = audioctx.createGain();\n\n    source.buffer = buffers[number];\n    convolver.buffer = buffers[0];\n\n    source.connect(volume);\n    volume.gain.value = 1;\n    volume.connect(compressor);\n\n    compressor.connect(convolver);\n    compressor.connect(audioctx.destination);\n\n    source.start(0);\n}\nfunction RawPlay(number) {\n    source = audioctx.createBufferSource();\n\n    source.buffer = buffers[number];\n\n    var compressor = audioctx.createDynamicsCompressor();\n    var volume = audioctx.createGain();\n\n    source.connect(volume);\n    volume.gain.value = 1;\n    volume.connect(compressor);\n\n    compressor.connect(audioctx.destination);\n\n    source.start(0);\n}\n</script>\n</head>\n<body onload=\"LoadBuffers()\">\n    <div class=\"navbar-wrapper\">\n      <div class=\"container\">\n\n        <div class=\"navbar navbar-fixed-top\" role=\"navigation\">\n          <div class=\"container\">\n            <div class=\"navbar-header\">\n              <a class=\"navbar-brand\" href=\"#\"><img src=\"/img/logo_character_white.png\" style=\"max-height:60px;\"></a>\n            </div>\n          </div>\n        </div>\n\n      </div>\n    </div>\n\n    <div id=\"myCarousel\" class=\"carousel\">\n      <div class=\"carousel-inner\">\n        <div class=\"item active\" style=\"background:url('http://img.youtube.com/vi/ns3iuLbNbCI/maxresdefault.jpg') no-repeat center center fixed;background-size: cover;\">\n          <img src=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" alt=\"First slide\" style=\"background-color:rgba(0,0,0,0.5);\">\n          <div class=\"container\">\n            <div class=\"carousel-caption\">\n              <h1>クライシスコア ファイナルファンタジー7のナビゲーション音声をHTML5でできる限り再現してみた</h1>\n              <p>ナビゲーション音声を作ろうと思い、クライシスコア ファイナルファンタジー7の戦闘中のナビゲーションの音声がかっこよかったと思いHTML5でやってみました。↓のボタンから再生できます</p>\n              <p>\n                <a class=\"btn btn-lg btn-primary\" href=\"#\" role=\"button\" onclick=\"Play(2)\">Activating Combat Mode</a>\n                <a class=\"btn btn-lg btn-primary\" href=\"#\" role=\"button\" onclick=\"Play(1)\">Modulating Phase</a>\n                <a class=\"btn btn-lg btn-primary\" href=\"#\" role=\"button\" onclick=\"Play(3)\">Confrict Resolved</a>\n              </p>\n              <p>↓のボタンから元の音源を再生できます</p>\n              <p>\n                <a class=\"btn btn-lg btn-primary\" href=\"#\" role=\"button\" onclick=\"RawPlay(2)\">Activating Combat Mode</a>\n                <a class=\"btn btn-lg btn-primary\" href=\"#\" role=\"button\" onclick=\"RawPlay(1)\">Modulating Phase</a>\n                <a class=\"btn btn-lg btn-primary\" href=\"#\" role=\"button\" onclick=\"RawPlay(3)\">Confrict Resolved</a>\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"container marketing\">\n      <div class=\"row featurette\">\n        <div class=\"col-md-6\">\n          <h2 class=\"featurette-heading\">クライススコア ファイナルファンタジーVIIより</h2>\n          <p class=\"lead\">戦闘中の動画。</p>\n        </div>\n        <div class=\"col-md-6\">\n          <iframe width=\"560\" height=\"315\" src=\"//www.youtube.com/embed/ns3iuLbNbCI?start=34\" frameborder=\"0\" allowfullscreen></iframe>\n        </div>\n      </div>\n\n      <hr class=\"featurette-divider\">\n\n      <!-- Three columns of text below the carousel -->\n      <div class=\"row\">\n       <h2>参考サイト</h2>\n        <div class=\"col-lg-4\">\n          <h2>Web Audio API を使用したゲーム用音声の開発</h2>\n          <p>HTML5のWeb Audio API、特にインパルス応答例を参考にしました。</p>\n          <p><a class=\"btn btn-default\" href=\"http://www.html5rocks.com/ja/tutorials/webaudio/games/\" target=\"_blank\" role=\"button\">View details &raquo;</a></p>\n        </div><!-- /.col-lg-4 -->\n        <div class=\"col-lg-4\">\n          <h2>Mac Text To Speechでしゃべらせた内容をAIFFで保存</h2>\n          <p>英語の音声合成を色々と試してみたけれどMacのSayコマンドが一番自然でした</p>\n          <p><a class=\"btn btn-default\" href=\"http://ambientlife.jugem.jp/?eid=84\" target=\"_blank\" role=\"button\">View details &raquo;</a></p>\n        </div><!-- /.col-lg-4 -->\n        <div class=\"col-lg-4\">\n          <h2>システム解説</h2>\n          <p>Qiitaに記載しました。</p>\n          <p><a class=\"btn btn-default\" href=\"http://qiita.com/ikko/items/10d76d67b4e60e00f02c\" target=\"_blank\" role=\"button\">View details &raquo;</a></p>\n        </div><!-- /.col-lg-4 -->\n      </div><!-- /.row -->\n\n\n      <!-- START THE FEATURETTES -->\n\n      <hr class=\"featurette-divider\">\n\n      <!-- FOOTER -->\n      <footer>\n        <p class=\"pull-right\"><a href=\"#\">Back to top</a></p>\n      </footer>\n\n    </div><!-- /.container -->\n</body>\n</html>","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[31,0],[31,1]],"newRange":[[31,0],[31,0]],"oldText":" ","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[23,0],[23,1]],"newRange":[[23,0],[23,0]],"oldText":" ","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[18,0],[18,1]],"newRange":[[18,0],[18,0]],"oldText":" ","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[175,7],[175,7]],"newRange":[[175,7],[176,0]],"oldText":"","newText":"\n","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[176,0],[176,0]]},"newParams":{"range":[[175,7],[175,7]]},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[7,0],[11,0]],"newRange":[[7,0],[7,0]],"oldText":"<link rel=\"stylesheet\" href=\"//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css\">\n<link rel=\"stylesheet\" href=\"//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css\">\n<script src=\"//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js\"></script>\n<link href=\"http://getbootstrap.com/examples/carousel/carousel.css\" rel=\"stylesheet\">\n","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[9,11],[9,11]]},"newParams":{"range":[[9,10],[9,11]]},"deserializer":"MarkerPatch"},{"oldRange":[[9,10],[9,11]],"newRange":[[9,10],[9,10]],"oldText":"s","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[10,11],[10,11]]},"newParams":{"range":[[10,10],[10,11]]},"deserializer":"MarkerPatch"},{"oldRange":[[10,10],[10,11]],"newRange":[[10,10],[10,10]],"oldText":"s","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[11,11],[11,11]]},"newParams":{"range":[[11,10],[11,11]]},"deserializer":"MarkerPatch"},{"oldRange":[[11,10],[11,11]],"newRange":[[11,10],[11,10]],"oldText":"s","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[12,11],[12,11]]},"newParams":{"range":[[12,10],[12,11]]},"deserializer":"MarkerPatch"},{"oldRange":[[12,10],[12,11]],"newRange":[[12,10],[12,10]],"oldText":"s","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[89,0],[168,0]],"newRange":[[89,0],[89,0]],"oldText":"\n        <div class=\"navbar navbar-fixed-top\" role=\"navigation\">\n          <div class=\"container\">\n            <div class=\"navbar-header\">\n              <a class=\"navbar-brand\" href=\"#\"><img src=\"/img/logo_character_white.png\" style=\"max-height:60px;\"></a>\n            </div>\n          </div>\n        </div>\n\n      </div>\n    </div>\n\n    <div id=\"myCarousel\" class=\"carousel\">\n      <div class=\"carousel-inner\">\n        <div class=\"item active\" style=\"background:url('http://img.youtube.com/vi/ns3iuLbNbCI/maxresdefault.jpg') no-repeat center center fixed;background-size: cover;\">\n          <img src=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" alt=\"First slide\" style=\"background-color:rgba(0,0,0,0.5);\">\n          <div class=\"container\">\n            <div class=\"carousel-caption\">\n              <h1>クライシスコア ファイナルファンタジー7のナビゲーション音声をHTML5でできる限り再現してみた</h1>\n              <p>ナビゲーション音声を作ろうと思い、クライシスコア ファイナルファンタジー7の戦闘中のナビゲーションの音声がかっこよかったと思いHTML5でやってみました。↓のボタンから再生できます</p>\n              <p>\n                <a class=\"btn btn-lg btn-primary\" href=\"#\" role=\"button\" onclick=\"Play(2)\">Activating Combat Mode</a>\n                <a class=\"btn btn-lg btn-primary\" href=\"#\" role=\"button\" onclick=\"Play(1)\">Modulating Phase</a>\n                <a class=\"btn btn-lg btn-primary\" href=\"#\" role=\"button\" onclick=\"Play(3)\">Confrict Resolved</a>\n              </p>\n              <p>↓のボタンから元の音源を再生できます</p>\n              <p>\n                <a class=\"btn btn-lg btn-primary\" href=\"#\" role=\"button\" onclick=\"RawPlay(2)\">Activating Combat Mode</a>\n                <a class=\"btn btn-lg btn-primary\" href=\"#\" role=\"button\" onclick=\"RawPlay(1)\">Modulating Phase</a>\n                <a class=\"btn btn-lg btn-primary\" href=\"#\" role=\"button\" onclick=\"RawPlay(3)\">Confrict Resolved</a>\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"container marketing\">\n      <div class=\"row featurette\">\n        <div class=\"col-md-6\">\n          <h2 class=\"featurette-heading\">クライススコア ファイナルファンタジーVIIより</h2>\n          <p class=\"lead\">戦闘中の動画。</p>\n        </div>\n        <div class=\"col-md-6\">\n          <iframe width=\"560\" height=\"315\" src=\"//www.youtube.com/embed/ns3iuLbNbCI?start=34\" frameborder=\"0\" allowfullscreen></iframe>\n        </div>\n      </div>\n\n      <hr class=\"featurette-divider\">\n\n      <!-- Three columns of text below the carousel -->\n      <div class=\"row\">\n       <h2>参考サイト</h2>\n        <div class=\"col-lg-4\">\n          <h2>Web Audio API を使用したゲーム用音声の開発</h2>\n          <p>HTML5のWeb Audio API、特にインパルス応答例を参考にしました。</p>\n          <p><a class=\"btn btn-default\" href=\"http://www.html5rocks.com/ja/tutorials/webaudio/games/\" target=\"_blank\" role=\"button\">View details &raquo;</a></p>\n        </div><!-- /.col-lg-4 -->\n        <div class=\"col-lg-4\">\n          <h2>Mac Text To Speechでしゃべらせた内容をAIFFで保存</h2>\n          <p>英語の音声合成を色々と試してみたけれどMacのSayコマンドが一番自然でした</p>\n          <p><a class=\"btn btn-default\" href=\"http://ambientlife.jugem.jp/?eid=84\" target=\"_blank\" role=\"button\">View details &raquo;</a></p>\n        </div><!-- /.col-lg-4 -->\n        <div class=\"col-lg-4\">\n          <h2>システム解説</h2>\n          <p>Qiitaに記載しました。</p>\n          <p><a class=\"btn btn-default\" href=\"http://qiita.com/ikko/items/10d76d67b4e60e00f02c\" target=\"_blank\" role=\"button\">View details &raquo;</a></p>\n        </div><!-- /.col-lg-4 -->\n      </div><!-- /.row -->\n\n\n      <!-- START THE FEATURETTES -->\n\n      <hr class=\"featurette-divider\">\n\n      <!-- FOOTER -->\n      <footer>\n        <p class=\"pull-right\"><a href=\"#\">Back to top</a></p>\n      </footer>\n","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[88,0],[89,0]],"newRange":[[88,0],[88,0]],"oldText":"      <div class=\"container\">\n","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[88,0],[88,0]],"newRange":[[88,0],[88,101]],"oldText":"","newText":"<a class=\"btn btn-lg btn-primary\" href=\"#\" role=\"button\" onclick=\"Play(2)\">Activating Combat Mode</a>","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"}],"redoStack":[],"deserializer":"History"},"filePath":"/Users/kwatanabe/git/gists/sound_composer/sample.html","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"127de6442df173e3429ddf4b366570b7536c9049","deserializer":"TextBuffer"}],"deserializer":"Project"},"workspace":{"paneContainer":{"root":{"id":3,"items":[{"id":9,"softTabs":false,"displayBuffer":{"id":10,"softWrap":false,"editorWidthInChars":null,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/kwatanabe/git/gists/sound_composer/README.md","tabLength":4,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"},{"id":22,"softTabs":false,"displayBuffer":{"id":23,"softWrap":false,"editorWidthInChars":null,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/kwatanabe/git/gists/sound_composer/sound_creator.rb","tabLength":4,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"},{"id":26,"softTabs":true,"displayBuffer":{"id":27,"softWrap":false,"editorWidthInChars":null,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/kwatanabe/git/gists/sound_composer/sound.js","tabLength":4,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"},{"id":33,"softTabs":false,"displayBuffer":{"id":34,"softWrap":false,"editorWidthInChars":null,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/kwatanabe/git/gists/sound_composer/sample.html","tabLength":4,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"}],"activeItemUri":"/Users/kwatanabe/git/gists/sound_composer/sample.html","focused":false,"deserializer":"Pane"},"activePaneId":3,"deserializer":"PaneContainer","version":1},"fullScreen":false,"packagesWithActiveGrammars":["language-gfm","language-shellscript","language-ruby","language-javascript","language-html"],"deserializer":"Workspace"},"packageStates":{"script":{"scriptOptionsViewState":""},"fuzzy-finder":{"/Users/kwatanabe/git/gists/sound_composer/README.md":1408599513494,"/Users/kwatanabe/git/gists/sound_composer/sound_creator.rb":1408600090438,"/Users/kwatanabe/git/gists/sound_composer/sound.js":1408600093361,"/Users/kwatanabe/git/gists/sound_composer/sample.html":1408600667367},"keybinding-resolver":{"attached":false},"metrics":{"sessionLength":1372232},"tree-view":{"directoryExpansionStates":{"sound":{}},"selectedPath":"/Users/kwatanabe/git/gists/sound_composer/sample.html","hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":0,"width":200}}}